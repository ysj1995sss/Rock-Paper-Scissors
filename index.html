<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>RPS Battle Arena</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Rubik:wght@400;700&display=swap');

        body {
            background: linear-gradient(135deg, #e0e7ff 0%, #f3f4f6 100%);
            font-family: 'Rubik', sans-serif;
            touch-action: manipulation;
        }

        /* Shake Animation for the hands */
        @keyframes shakePlayer {
            0% { transform: rotateY(0) translateY(0); }
            25% { transform: rotateY(0) translateY(-20px) rotate(-10deg); }
            50% { transform: rotateY(0) translateY(0); }
            75% { transform: rotateY(0) translateY(-20px) rotate(-10deg); }
            100% { transform: rotateY(0) translateY(0); }
        }

        @keyframes shakeCpu {
            0% { transform: scaleX(-1) translateY(0); }
            25% { transform: scaleX(-1) translateY(-20px) rotate(10deg); }
            50% { transform: scaleX(-1) translateY(0); }
            75% { transform: scaleX(-1) translateY(-20px) rotate(10deg); }
            100% { transform: scaleX(-1) translateY(0); }
        }

        .shake-player {
            animation: shakePlayer 1.5s ease-in-out;
        }

        .shake-cpu {
            animation: shakeCpu 1.5s ease-in-out;
        }

        /* Button Press Effect */
        .game-btn {
            transition: transform 0.1s, background-color 0.2s;
        }
        .game-btn:active {
            transform: scale(0.95);
        }

        /* CPU Hand is mirrored horizontally */
        .cpu-hand {
            transform: scaleX(-1);
        }
    </style>
</head>
<body class="h-screen flex flex-col items-center justify-center p-4 select-none">

    <!-- Header & Scoreboard -->
    <div class="w-full max-w-md bg-white rounded-2xl shadow-xl p-6 mb-6">
        <h1 class="text-2xl md:text-3xl font-bold text-center text-gray-800 mb-6 tracking-wider">ROCK PAPER SCISSORS</h1>
        
        <div class="flex justify-between items-center">
            <div class="text-center w-1/3">
                <p class="text-xs font-bold text-gray-400 uppercase tracking-widest">You</p>
                <p id="userScore" class="text-4xl font-bold text-blue-600">0</p>
            </div>
            <div class="text-center w-1/3">
                <span class="text-gray-300 font-bold text-xl">VS</span>
            </div>
            <div class="text-center w-1/3">
                <p class="text-xs font-bold text-gray-400 uppercase tracking-widest">CPU</p>
                <p id="cpuScore" class="text-4xl font-bold text-red-500">0</p>
            </div>
        </div>
    </div>

    <!-- Game Area -->
    <div class="w-full max-w-md flex flex-col items-center relative mb-8 min-h-[200px]">
        
        <!-- Result Message -->
        <div id="resultText" class="absolute -top-12 text-xl font-bold text-gray-600 h-8 transition-colors duration-300">
            Choose your weapon!
        </div>

        <!-- Hands Display -->
        <div class="flex justify-between w-full px-8 items-center h-48">
            <!-- User Hand -->
            <div id="userHand" class="text-8xl md:text-9xl transition-transform origin-bottom">
                ✊
            </div>
            
            <!-- CPU Hand -->
            <div id="cpuHand" class="text-8xl md:text-9xl cpu-hand transition-transform origin-bottom">
                ✊
            </div>
        </div>
    </div>

    <!-- Controls -->
    <div class="w-full max-w-md grid grid-cols-3 gap-4 mb-8">
        <button onclick="playRound('rock')" class="game-btn bg-white border-b-4 border-gray-200 hover:bg-gray-50 rounded-xl p-4 flex flex-col items-center gap-2 shadow-sm" id="btn-rock">
            <span class="text-4xl">✊</span>
            <span class="text-xs font-bold text-gray-500 uppercase">Rock</span>
        </button>
        <button onclick="playRound('paper')" class="game-btn bg-white border-b-4 border-gray-200 hover:bg-gray-50 rounded-xl p-4 flex flex-col items-center gap-2 shadow-sm" id="btn-paper">
            <span class="text-4xl">✋</span>
            <span class="text-xs font-bold text-gray-500 uppercase">Paper</span>
        </button>
        <button onclick="playRound('scissors')" class="game-btn bg-white border-b-4 border-gray-200 hover:bg-gray-50 rounded-xl p-4 flex flex-col items-center gap-2 shadow-sm" id="btn-scissors">
            <span class="text-4xl">✌️</span>
            <span class="text-xs font-bold text-gray-500 uppercase">Scissors</span>
        </button>
    </div>

    <!-- Reset -->
    <button onclick="resetGame()" class="text-sm text-gray-400 hover:text-gray-600 font-bold uppercase tracking-widest transition-colors">
        Reset Score
    </button>

    <script>
        // --- Game State ---
        let scores = { user: 0, cpu: 0 };
        let isAnimating = false;

        // --- DOM Elements ---
        const userHand = document.getElementById('userHand');
        const cpuHand = document.getElementById('cpuHand');
        const resultText = document.getElementById('resultText');
        const userScoreEl = document.getElementById('userScore');
        const cpuScoreEl = document.getElementById('cpuScore');
        const buttons = document.querySelectorAll('.game-btn');

        // --- Logic ---
        
        function playRound(userChoice) {
            if (isAnimating) return; // Prevent spamming
            isAnimating = true;

            // 1. Reset hands to Rock for the shake animation
            userHand.innerText = '✊';
            cpuHand.innerText = '✊';
            resultText.innerText = "Rock... Paper... Scissors...";
            resultText.className = "absolute -top-12 text-xl font-bold text-gray-400 h-8";

            // 2. Add Shake Classes
            userHand.classList.add('shake-player');
            cpuHand.classList.add('shake-cpu');

            // 3. Wait for animation to finish (1.5s)
            setTimeout(() => {
                // Get CPU Choice
                const choices = ['rock', 'paper', 'scissors'];
                const cpuChoice = choices[Math.floor(Math.random() * 3)];

                // Remove Shake classes
                userHand.classList.remove('shake-player');
                cpuHand.classList.remove('shake-cpu');

                // Update Icons
                updateHandIcons(userChoice, cpuChoice);

                // Determine Winner
                const winner = getWinner(userChoice, cpuChoice);
                updateScore(winner);
                displayResult(winner, userChoice, cpuChoice);

                isAnimating = false;
            }, 1500);
        }

        function updateHandIcons(user, cpu) {
            const icons = { rock: '✊', paper: '✋', scissors: '✌️' };
            userHand.innerText = icons[user];
            cpuHand.innerText = icons[cpu];
        }

        function getWinner(u, c) {
            if (u === c) return 'draw';
            if (
                (u === 'rock' && c === 'scissors') ||
                (u === 'paper' && c === 'rock') ||
                (u === 'scissors' && c === 'paper')
            ) {
                return 'user';
            }
            return 'cpu';
        }

        function updateScore(winner) {
            if (winner === 'user') {
                scores.user++;
                userScoreEl.innerText = scores.user;
            } else if (winner === 'cpu') {
                scores.cpu++;
                cpuScoreEl.innerText = scores.cpu;
            }
        }

        function displayResult(winner, u, c) {
            if (winner === 'user') {
                resultText.innerText = `You Win! ${capitalize(u)} beats ${capitalize(c)}.`;
                resultText.className = "absolute -top-12 text-xl font-bold text-green-500 h-8";
            } else if (winner === 'cpu') {
                resultText.innerText = `You Lose! ${capitalize(c)} beats ${capitalize(u)}.`;
                resultText.className = "absolute -top-12 text-xl font-bold text-red-500 h-8";
            } else {
                resultText.innerText = "It's a Draw!";
                resultText.className = "absolute -top-12 text-xl font-bold text-gray-600 h-8";
            }
        }

        function resetGame() {
            if (isAnimating) return;
            scores.user = 0;
            scores.cpu = 0;
            userScoreEl.innerText = '0';
            cpuScoreEl.innerText = '0';
            resultText.innerText = "Choose your weapon!";
            resultText.className = "absolute -top-12 text-xl font-bold text-gray-600 h-8";
            userHand.innerText = '✊';
            cpuHand.innerText = '✊';
        }

        function capitalize(str) {
            return str.charAt(0).toUpperCase() + str.slice(1);
        }

        // Keyboard Support
        window.addEventListener('keydown', (e) => {
            if (isAnimating) return;
            if (e.key === 'r' || e.key === '1') playRound('rock');
            if (e.key === 'p' || e.key === '2') playRound('paper');
            if (e.key === 's' || e.key === '3') playRound('scissors');
        });

    </script>
</body>
</html>
